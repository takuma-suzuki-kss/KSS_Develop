# データ拡張のまとめと評価内容　Q1～Q2用

## 取り組みの背景と目的

### データ拡張の効果の把握
  - オブジェクトのマスク領域精度を良くする方法がわかっていない
  - 何がどのように効くか数値の裏付けでの把握ができていない

### 背景
  - 3DPickはAI＋ルールベースで100％のピッキング精度を実現している。  
  - ルールベースを併用している理由は、AIのみでは物体のマスク領域精度が悪いため。  
  - 理想的には、ルールベースなくし、AI単体で100％の精度を目指したい

### 目的
  - オブジェクトのマスクの精度を向上させるためのデータ拡張手法を3DPickのワークを題材にまとめる。
　
### 評価指標
 - 領域に対して正確性の評価　→　IOU（スコア）
 - 目視にて、学習データの領域が改善されているかを確認する

### 制限
  - インスタンスセグメンテーションに限定
  - 領域改善のためには何が効果的なのか、データ拡張の観点から検討
  - 現地（客先）にて学習するため、学習時間の制限あり（5～8ｈ以内）

-----

## データ拡張の一般的な目的
### **過学習の抑制** 
データ拡張により、モデルが訓練データに過度に適応することを防ぎます。  
過学習は、モデルが訓練データに過度に適応し、新しいデータに対してうまく一般化できない状態です。

例えば、製造現場の画像分類モデルを訓練する際、訓練データが限られている場合、モデルは特定の製造機械や部品の画像に対してのみ高い精度を示しますが、新しい機械や部品の画像に対しては誤った予測を行う可能性があります。これにより、製造現場での品質管理や異常検知が困難になることがあります。。

### **ロバスト性**
データ拡張により、モデルがさまざまな入力に対して堅牢になることを促進します。  
ロバスト性とは、モデルがノイズや変動に対してどれだけ堅牢であるかを指します。データ拡張を使用しない場合、モデルは微小な変化やノイズに対して敏感になり、予測精度が低下する可能性があります。

例えば、製造現場の画像認識モデルが異なる照明条件や視点から撮影された画像に対して誤った認識を行うことがあります。これにより、製造プロセスの監視や異常検知が不正確になる可能性があります。

### **データ収集コストの削減**
データ拡張により、追加のデータ収集の必要性を減少させます。  
データ拡張を使用しない場合、追加の訓練データを収集する必要があります。加えて収集後アノテーションも必要となります。これは時間とコストがかかるプロセスです。

例えば、製造現場の異なる状況や条件で大量の画像データを収集する必要があります。また、それらをアノテーションする必要があります。特にSemantic Segmentationでは、オブジェクト毎にマスクをする必要があるため膨大な工数が見込まれます。これにより、データ収集のコストが増加し、プロジェクトの進行が遅れる可能性があります。
 
----
## 具体的な評価指標
‐ 
- **IoU(Intersection over Union)**: 正解とした範囲に対してモデルが予測した範囲がどの程度重なっているかを示す指標

## 3DPick既存手法の一部、評価、効果測定方法
- **既存手法の概要**: 3DPickで使用されるデータ拡張手法の概要を説明します。  

    |  *No* |処理内容|
    |--|--|
    |1. |貼り付け　|
    |2. |回転|
    |3. |バイラテラルフィルタ|
    |4. |エンハンス（シャープネス）|
    |5. |明暗補正（スクリーン/乗算）|
    |6. |コントラスト補正|
    |7. |色温度補正|
    |8. |ベースとなる画像と、貼り付け用のワークを別に管理（よりリアルに近いデータ拡張を狙って）|
    |9. |アノテーションデータの見直し/全体が写っているワークのみ貼り付け用画像として採用|
    |10. |アノテーションデータの見直し/マスクに穴が開かないように丁寧なアノテーション|
    |11. |オフライン拡張　→　現状の処理　データを増やしてからそれを学習する|
    |12. |データ不均衡抑制（各クラスの比率が均一に近くなるように拡張）|
    |13. |オンライン拡張　→　バッチごとにデータ拡張をして学習する|


- **評価方法**: 3DPickで使用される評価指標と評価方法を説明します。
- IOUを評価をします。


- 学習用データ
  - データ拡張ベース（精度/再現率）
    1. 1,2,8,9,10,11,12  
  - 拡張方法について考え方 
  
- 評価用データ
    - 1～12の項目を入れて作成したデータにて評価



##  **効果測定方法**: 
3DPickでデータ拡張の効果を測定する方法を説明します。  
1. 以下のものに対して評価データを作成する  
  - Q441 銀座コージーコーナー（フィナンシェ）
  - Q573 味の素AGF（コーヒースティック）
  - Q567 インドネシアグリコ（ポッキー）
  - Q585 旭化成メディカル（ダイアライザー）

2. 上記に示した学習用データで学習したモデルで、精度、再現率を数値評価
3. 汎化性能評価：出力結果を目視にて比較し、何が改善されたかを考察
