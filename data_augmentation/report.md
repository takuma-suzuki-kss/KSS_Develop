## ✅ アクションプラン（Action Plan）

### 1. **課題の明確化**
- 境界領域のマスク精度が低く、現在はルールベース処理を併用している。
- 目標は、AI単体での100%ピッキング精度の実現。

### 2. **評価指標の設定**
- **定量評価**：IoU（Intersection over Union）、Boundary IoU（境界領域に特化したIoU）
- **定性評価**：目視によるマスク境界の改善確認

### 3. **データ拡張および損失設計の見直し**
以下の手法を中心に検討：

| 手法 | 目的 | 境界精度への期待効果 |
|------|------|------------------------|
| lapクラスの統合（2クラス化） | クラス間競合の解消、学習安定化 | 境界の明瞭化、誤分類の減少 |
| マスク損失の重み増加 | マスク予測への学習リソース集中 | 境界の精度向上 |
| Gaussian Blur + ノイズ付加 | 境界の曖昧さへの耐性向上 | ロバスト性の向上、過学習の抑制 |

### 4. **実験設計**
- **ベースラインモデル**：既存のMask R-CNN学習済みモデル
- **比較実験**：拡張なし vs 各手法適用（単独および組み合わせ）
- **学習条件**：エポック数・バッチサイズを調整し、学習時間は5～8時間以内に制限

### 5. **評価と分析**
- 各手法ごとにIoUおよびBoundary IoUを記録
- 境界領域に注目したマスクの可視化比較
- 定性評価と定量評価を組み合わせて総合的に判断

---

# ✅ 結論テンプレート


### ✅ 【背景】
  - 3DPickはAI＋ルールベースで100％のピッキング精度を実現している。  
  - ルールベースを併用している理由は、AIのみでは物体のマスク領域精度が悪いため。  
  - 理想的には、ルールベースなくし、AI単体で100％の精度を目指したい

### ✅ 【目的】

本検証では、3Dピッキングにおけるインスタンスセグメンテーションの**マスク境界精度の向上**を目的とし、既存および新規のデータ拡張・損失設計手法の効果を評価することで、今後導入すべき改善方針を明確化する。

---

### ✅ 【実施済みの拡張手法（ベースライン）】

以下の手法を用いたものをベースラインの学習済みモデルとする。

| No | 手法 | 目的 |
|----|------|------|
| 1 | 貼り付け | ワークの多様性向上 |
| 2 | 回転 | 姿勢バリエーションの増加 |
| 3 | バイラテラルフィルタ | ワークの平滑化とノイズ除去 |
| 4 | シャープネス強調 | ワークのエッジ強調 |
| 5 | 明暗補正 | ワークの多様性向上 |
| 6 | コントラスト補正 | ワークの多様性向上 |
| 7 | 色温度補正 | 環境変化への対応 |
| 8 | 貼り付け画像の分離管理 | よりリアルな合成 |
| 9 | アノテーション見直し（全体写り） | 不完全なマスクの排除 |
| 10 | アノテーション見直し（穴なし） | マスクの精度向上 |
| 11 | オフライン拡張 | データ量の増加 |

2024年度の取り組みにて精度が改善した

このベースライン精度に対して、どのように変化したかを比較する

---

### ✅ アプローチ内容（**マスクの境界領域**に対する精度への影響を評価）

今後、以下の手法を導入することで、**マスクの境界精度向上**がどのように変化するかを確認する。

| 手法 | 目的 | 境界精度への期待効果 |
|------|------|------------------------|
| lapクラスの統合（2クラス化） | クラス不均衡の解消、学習安定化 | 境界の明瞭化、誤分類の減少 |
| マスク損失の重み増加 | マスク予測への学習リソース集中 | 境界の精度向上 |
| Gaussian Blur + ノイズ付加 | 境界の曖昧さへの耐性向上 | ロバスト性の向上、過学習の抑制 |

---
### ✅ 【結果】
| 手法 | 変更前（精度） | 変更後（精度） |変更前（IOU）|変更後（IOU）|
|------|------|------------------------|--|--|
| lapクラスの統合（2クラス化） | 60 | 80 |60|60|
| マスク損失の重み増加 | 60 | 80 |60|60|
| Gaussian Blur + ノイズ付加 | 60 | 80 |60|60|



### ✅ 【考察】

- **重なり（-lap）クラスの統合（2クラス化）**は、クラス間の曖昧さを排除し、マスクの境界精度を大きく改善した。
- **マスク損失の重み増加**は、マスク予測に対する学習の集中を促し、特に境界領域の精度向上に寄与した。
- **Gaussian Blur + ノイズ付加**は、境界の曖昧さに対する耐性を高める可能性があるが、他手法との併用や精度への影響を慎重に評価する必要がある。



---

### ✅ 【結論】

本検証により、マスクの境界精度向上には、**クラス設計の簡素化（lapクラスの統合）と損失設計の最適化（マスク重みの調整）**が有効であることが確認された。

今後は、以下の方針に基づき、さらなる精度向上を目指す：

- **lapクラスの統合を標準化**し、アノテーションの一貫性と学習安定性を確保する。
- **マスク損失の重み調整**を継続的に最適化し、境界領域の学習強化を図る。
- **Gaussian Blur + ノイズ付加**などのロバスト性向上手法については、他手法との相互作用を踏まえた上で段階的に導入を検討する。

また、**Boundary IoUなどの補助指標を導入し、定量的な評価体制の強化**を図ることで、今後の改善効果をより正確に把握できる体制を整える。
